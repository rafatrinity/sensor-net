[platformio]
test_dir = test/unit
data_dir = web
default_envs = esp32

; =========================
; Ambientes Arduino (reais)
; =========================

[env:esp32]
platform = espressif32
board = esp32dev
framework = arduino
board_build.filesystem = littlefs
test_framework = unity
lib_deps =
    knolleary/PubSubClient@^2.8
    adafruit/DHT sensor library@^1.4.6
    adafruit/Adafruit Unified Sensor@^1.1.14
    marcoschwartz/LiquidCrystal_I2C@^1.1.4
    bblanchon/ArduinoJson
    arduino-libraries/NTPClient@^3.2.1
    ESP Async WebServer
    AsyncTCP
    LittleFS_esp32 
upload_port = /dev/ttyACM0
monitor_speed = 115200
build_flags = -DARDUINO_ESP32_DEV=1 -DCOMPRESSED_FIRMWARE
board_build.partitions = huge_app.csv
board_build.flash_mode = dio

[env:seeed_xiao_esp32c3]
platform = espressif32
board = seeed_xiao_esp32c3
framework = arduino
board_build.filesystem = littlefs
test_framework = unity
lib_deps =
    knolleary/PubSubClient@^2.8
    adafruit/DHT sensor library@^1.4.6
    adafruit/Adafruit Unified Sensor@^1.1.14
    marcoschwartz/LiquidCrystal_I2C@^1.1.4
    bblanchon/ArduinoJson
    arduino-libraries/NTPClient@^3.2.1
    ESP Async WebServer
    AsyncTCP
    LittleFS_esp32
upload_port = /dev/ttyACM0
monitor_speed = 115200
build_flags = -DARDUINO_SEEED_XIAO_ESP32C3=1 -DCOMPRESSED_FIRMWARE
board_build.partitions = huge_app.csv
board_build.flash_mode = dio

; ====================================================
; Ambientes de Teste Arduino (sem upload para testes)
; ====================================================

[env:esp32_test]
platform = espressif32
board = esp32dev
framework = arduino
board_build.filesystem = littlefs
test_framework = unity
lib_deps =
    knolleary/PubSubClient@^2.8
    adafruit/DHT sensor library@^1.4.6
    adafruit/Adafruit Unified Sensor@^1.1.14
    marcoschwartz/LiquidCrystal_I2C@^1.1.4
    bblanchon/ArduinoJson
    arduino-libraries/NTPClient@^3.2.1
upload_command = echo "Upload ignorado em modo de testes"
upload_port = dummy
build_flags =
    -DUNIT_TEST
    -DARDUINO_ESP32_DEV=1 -DCOMPRESSED_FIRMWARE
monitor_speed = 115200
board_build.partitions = huge_app.csv
board_build.flash_mode = dio

[env:seeed_xiao_esp32c3_test]
platform = espressif32
board = seeed_xiao_esp32c3
framework = arduino
board_build.filesystem = littlefs
test_framework = unity
lib_deps =
    knolleary/PubSubClient@^2.8
    adafruit/DHT sensor library@^1.4.6
    adafruit/Adafruit Unified Sensor@^1.1.14
    marcoschwartz/LiquidCrystal_I2C@^1.1.4
    bblanchon/ArduinoJson
    arduino-libraries/NTPClient@^3.2.1
upload_command = echo "Upload ignorado em modo de testes"
upload_port = dummy
build_flags =
    -DUNIT_TEST
    -DARDUINO_SEEED_XIAO_ESP32C3=1 -DCOMPRESSED_FIRMWARE
monitor_speed = 115200
board_build.partitions = huge_app.csv
board_build.flash_mode = dio

; ============================
; Ambiente Nativo (host) para testes
; ============================
; NÃO use board neste ambiente, pois ele não é necessário.
[env:native]
platform = native
framework = native
test_framework = unity
build_flags = -DUNIT_TEST